# Требования к проекту

## Содержание

1 [Введение](#1-введение)  
1.1 [Назначение](#11-назначение)  
1.2 [Бизнес-требования](#12-бизнес-требования)  
1.2.1 [Исходные данные](#121-исходные-данные)  
1.2.2 [Возможности бизнеса](#122-возможности-бизнеса)  
1.2.3 [Границы проекта](#123-границы-проекта)  
1.3 [Аналоги](#13-аналоги)  
2 [Требования пользователя](#2-требования-пользователя)  
2.1 [Программные интерфейсы](#21-программные-интерфейсы)  
2.2 [Интерфейс пользователя](#22-интерфейс-пользователя)  
2.3 [Характеристики пользователя](#23-характеристики-пользователя)  
2.3.1 [Классы пользователей](#231-классы-пользователей)  
2.3.2 [Аудитория приложения](#232-аудитория-приложения)  
2.3.2.1 [Целевая аудитория](#2321-целевая-аудитория)  
2.3.2.2 [Побочная аудитория](#2322-побочная-аудитория)  
2.4 [Предположения и зависимости](#24-предположения-и-зависимости)  
3 [Системные требования](#3-системные-требования)  
3.1 [Функциональные требования](#31-функциональные-требования)  
3.1.1 [Основные функции](#311-основные-функции)    
3.1.1.1 [Вход пользователя в приложение](#3111-вход-пользователя-в-приложение)   
3.1.1.2 [Работа с отчетами и видиотекой](#3112-работа-с-отчетами-и-видиотекой)  
3.1.1.3 [Непосредственное использование модели](#3113--непосредственное-использование-модели)  
3.1.1.4 [Управление моделями ИИ](#3114-управление-моделями-ии)  
3.1.1.5 [Администрирование системы](#3115-администрирование-системы)  
3.1.2 [Ограничения и исключения](#312-ограничения-и-исключения)  
3.2 [Нефункциональные требования](#32-нефункциональные-требования)  
3.2.1 [Атрибуты качества](#321-атрибуты-качества)  
3.2.1.1 [Требования к удобству использования](#3211-требования-к-удобству-использования)  
3.2.1.2 [Требования к безопасности](#3212-требования-к-безопасности)  
3.2.1.3 [Требования к доступности](#3213-требования-к-доступности)  
3.2.2 [Внешние интерфейсы](#322-внешние-интерфейсы)  
3.2.3 [Ограничения](#323-ограничения)  

# 1 Введение

## 1.1 Назначение  
В этом документе описаны функциональные и нефункциональные требования к системе детекции и анализа аварий (Road Accident Detection System) с графическим интерфейсом. Система предназначена для автоматического обнаружения потенциальных аварийных ситуаций, анализа дорожного движения и генерации детальных отчетов для повышения безопасности на дорогах.

## 1.2 Бизнес-требования  

### 1.2.1 Исходные данные  
В качестве исходных данных используется набор данных WTS(World Traffic Safety) с инсцениированными авариями, видиозаписи с  различных камер и различных ракурсов, контролируемая окружащая среда с каскадерами водителями и пешеходами. Необходимо детально описать моменты до и во время инцидентов.

### 1.2.2 Возможности бизнеса  
Актуальность модели, распознающей аварийные ситуации прежде всего вызвана частотой данных ситуаций. Модель найдет применение у транспортных компаний, служб экстренного реагирования, страховых компаний и производителей автомобилей(например, интергация с системами ADAS).

### 1.2.3 Границы проекта  
Система позволит детектировать дорожные аварии и потенциально опасные ситуации по представленному видеофайлу, а также анализировать поведение участников дорожного движения с последующей генерацией отчетов. Предусмотрено несколько групп пользователей (наблюдатель и аналитик), разделяющих доступ к частям системы для повышения безопасности и объективности данных.

## 1.3 Аналоги   
Аналогами являются такие системы как NVIDIA Metropolis, BriefCam и исследовательские проекты на базе датасета DoTA. Особенностью этих аналогов является то, что они позволяют детектировать дорожные инциденты и анализировать видео трафик. Они обеспечивают обнаружение аварий, отслеживание объектов и генерацию отчетов о происшествиях.

Недостатком этих решений является то, что большинство из них представляют собой коммерческие Enterprise-продукты, требующие сложной инфраструктуры и значительных финансовых затрат. Исследовательские аналоги, в свою очередь, часто не имеют удобного интерфейса и ориентированы исключительно на академическое использование, а не на практическое применение. Также существующие решения обычно фокусируются на транспортных средствах, уделяя недостаточно внимания пешеходам и их взаимодействию с автотранспортом.

Ключевым отличием данного проекта является специализация на детекции аварий с участием пешеходов на базе датасета WTS, доступность для малого бизнеса и исследователей, а также комплексный анализ поведения всех участников дорожного движения в контролируемой среде.

# 2 Требования пользователя

## 2.1 Программные интерфейсы  
Система использует датасет WTS, а также библиотеки OpenCV, YOLO, TensorFlow/PyTorch

## 2.2 Интерфейс пользователя
![Окно входа в систему.](/docs/mockups/sign_in_out%201.png)

![Окно регистрации нового пользователя.](/docs/mockups/sign_up.png)  

![Окно регистрации нового пользователя после ввода имени, уже зарегистрированного в приложении.](/docs/mockups/taken.png)

![Окно входа для зарегистрированного пользователя.](/docs/mockups/sign_in.png)

![Главное окно системы (для администратора).](/docs/mockups/main.png)

![Окно для работы с видеотекой.](/docs/mockups/datasets.png)

![Окно для конфигурации модели.](/docs/mockups/model.png)

![Окно архива отчетов.](/docs/mockups/reports_archive.png)

![Окно анализа.](/docs/mockups/start.png)

## 2.3 Характеристики пользователя

### 2.3.1 Классы пользователей  
| Класс пользователей | Описание  |
|-------------|-------------|
| Наблюдатель |  Пользователь, доступ которому разрешен только к каталогу проанализированных предобработанных видеопотоков и отчетам, сгенерированным по ним  |
| Аналитик    | Пользователь, способный вносить изменения в работу системы путем изменения используемых алгоритмов и подходов для детекции, изменить формат отчета, а также способный использовать систему на собственном видеопотоке     |
| Администратор | Надсистемный пользователь, определяющий изначальных аналитиков, способный разжаловать их в правах. В остальном сам ялвляется аналитиком | 

### 2.3.2 Аудитория приложения

### 2.3.2.1 Целевая аудитория  
Работники транспортных компаний и страховых служб, юристы.

### 2.3.2.2 Побочная аудитория  
Исследователи в области компьютерного зрения, люди, изучающие ПДД.

## 2.4 Предположения и зависимости  
1. Система не может работать через веб клиент.  
2. Система не может изменять тренировочный набор данных в процессе обучения. При необходимости изменения модели или ее параметров, анализ должен быть остановлен до момента внесения корректировок аналитиками.

# 3 Системные требования

## 3.1 Функциональные требования

### 3.1.1 Основные функции

### 3.1.1.1 Вход пользователя в приложение
**Описание.** Пользователь имеет возможность использовать систему в соответсвии с правами ему предоставленными.
| Функция | Требования  |
|-------------|-------------|
|Регистрация нового пользователя | Система запрашивает у пользователя имя и электронный адрес для создания новой учетной записи, а также запрашивает пароль-активатор роли аналитика. В случае отсутствия активатора пользователь становится наблюдателем.  |
|*Пользователь с такими данными уже существует* | Система подразумевает наличие единственного пользователя с соответсвующими ником и адресом электронной почты, предоставляется возможность перезаполнить соответсвующие поля|
| Вход зарегистрированного пользователя | Система предоставляет поле для ввода имени пользователя и адреса его электронной почты |

### 3.1.1.2 Работа с отчетами и видиотекой
**Описание.** Пользователи имеют возможность взаимодействовать с отчетами в соответсвии с предоставленными правами.
| Функция | Требования  |
|-------------|-------------|
|Просмотр отчета | Система предоставляет доступ любому авторизованному пользователю просматривать отчеты из общего архива  |
|*Составление отчета* | Возможность задаь параметры составления отчета, удалить/измениьть отчет имеет только аналитик.
| Изменение видиотеки| Добавление новых видео в тренировачный набор (аналитик)|
|Фильтрация и поиск отчетов|Система предоставляет возможность фильтровать отчеты по дате, типу инцидента, серьезности аварии, местоположению|
|Сравнение отчетов|Аналитик может сравнивать несколько отчетов для выявления паттернов и тенденций|
|Экспорт отчетов|Возможность экспортировать отчеты в различные форматы: PDF, CSV, JSON|
|Автоматическая классификация|Система автоматически классифицирует инциденты по типам (столкновение, наезд на пешехода, опрокидывание и т.д.)|

### 3.1.1.3  Непосредственное использование модели
**Описание.** Пользователи имеют возможность применять модель к собственным входным данным в соответсвии с предоставленными правами.
| Функция | Требования  |
|-------------|-------------|
| Использование модели| Возможность пользователя класса аналитик использовать обученную тем или иным образом модель на собственном видеопотоке|
|Пакетная обработка|Возможность обработки нескольких видеофайлов одновременно с формированием сводного отчета|
|Настройка параметров анализа|Аналитик может изменять параметры детекции (порог уверенности, чувствительность, области интереса)|
|Визуализация результатов|Система предоставляет аннотированные видео с выделением опасных ситуаций|
|Сравнение моделей|Возможность тестирования и сравнения разных версий моделей на одних и тех же данных|  

### 3.1.1.4 Управление моделями ИИ
**Описание.** Администратор имеет возможность конфигурировать модели.
|Функция|	Требования|
|-------------|-------------|
|Загрузка моделей|	Администратор может загружать новые предобученные модели в систему|
|Версионирование моделей|Система поддерживает хранение и управление разными версиями моделей|
|Мониторинг производительности|Отслеживание точности и производительности моделей в production|
|A/B тестирование|Возможность тестирования разных моделей на части трафика|

### 3.1.1.5 Администрирование системы
**Описание.** Администратор имеет возможность управлять системой.
|Функция|	Требования|
|-------------|-------------|
|Управление пользователями	|Администратор может создавать, редактировать, блокировать пользователей и назначать роли|
|Мониторинг системы	|Отслеживание использования ресурсов, времени отклика, ошибок системы|
|Резервное копирование|	Автоматическое создание бэкапов базы данных и конфигураций|
|Логирование действий	|Подробное логирование всех действий пользователей для аудита|

### 3.1.2 Ограничения и исключения
1. Система не может работать через веб клиент. Доступ к системе осуществляется через десктопный GUI.  
2. Система не может предоставить права класса аналитик класу наблюдатель без подтверждения стороннего аналитика. Аналитик обладает правами наблюдателя.  

## 3.2 Нефункциональные требования

### 3.2.1 Атрибуты качества    

#### 3.2.1.1 Требования к удобству использования
1. Система реализует все основные функции.  
2. Все функциональные элементы пользовательского интерфейса имеют названия, описывающие действие, которое произойдет при выборе элемента.  
3. Интерфейс не содержит избыточных элементов.  

#### 3.2.1.2 Требования к безопасности
1. Показатели точности модели должны быть достаточными для использования в юридических целях.   
2. Различные классы пользователей имеют доступ к данным, соответсвующим их компетенциям.  

#### 3.2.1.3 Требования к доступности
Время реакци на действия пользователя минмально.  

### 3.2.2 Внешние интерфейсы
Окно графического интерфейса удобно для использования:
1. Размер шрифта должен соответсвовать разрешению экрана.
2. Интерфейс оформлен в соответсвиями с одним из стандартов для [UI/UX дизайна](https://medium.com/@chathuswijekoonuom/ui-ux-standards-ddb4ad898ccc)

### 3.2.3 Ограничения  
1. Приложение реализовано для OS Windows 10/11
2. Язык разработки - Python